# EasyTest 使用手册

## 📖 目录

1. [快速开始](#快速开始)
2. [用户登录注册](#用户登录注册)
3. [仪表盘](#仪表盘)
4. [API 接口测试](#api-接口测试)
5. [Web 自动化测试](#web-自动化测试)
6. [性能测试](#性能测试)
7. [测试报告](#测试报告)
8. [测试文档](#测试文档)

---

## 快速开始

### 系统要求
- Python 3.10+
- Node.js 18+
- PostgreSQL 数据库
- 现代浏览器（Chrome、Firefox、Edge）

### 启动系统

1. **启动数据库**
   ```bash
   # 使用 Docker
   docker-compose up -d postgres
   
   # 或使用本地 PostgreSQL（确保服务运行在 5432 端口）
   ```

2. **初始化数据库（首次使用）**
   ```bash
   cd backend
   python init_db.py
   python create_test_user.py
   ```

3. **启动后端服务**
   ```bash
   cd backend
   .\run_server.bat
   # 后端运行在 http://127.0.0.1:5211
   ```

4. **启动前端服务**
   ```bash
   cd web
   npm install
   npm run dev
   # 前端运行在 http://localhost:5173
   ```

### 测试账号
- 用户名：`admin`
- 密码：`admin123`
- 邮箱：`admin@example.com`

---

## 用户登录注册

### 登录系统

**操作步骤：**
1. 打开浏览器，访问 `http://localhost:5173`
2. 在登录页面输入用户名和密码
3. 点击"登录"按钮

**功能说明：**
- 登录成功后会自动跳转到仪表盘
- 系统使用 JWT Token 进行身份验证
- Token 有效期内无需重复登录

### 注册账号

**操作步骤：**
1. 在登录页面点击"注册账号"
2. 填写以下信息：
   - 用户名（必填）
   - 邮箱（必填，用于找回密码）
   - 密码（必填，建议使用强密码）
   - 确认密码
3. 点击"注册"按钮

**注意事项：**
- 用户名和邮箱必须唯一
- 密码建议包含字母、数字和特殊字符

---

## 仪表盘

仪表盘是系统的主页，提供测试活动的总览。

### 功能介绍

**1. 统计卡片**
- **API 测试统计**：显示 API 测试总数、通过数、失败数
- **Web 测试统计**：显示 Web 自动化测试的执行情况
- **性能测试统计**：显示性能测试场景总数和运行中的测试数
- **文档统计**：显示测试文档总数

**2. 测试趋势图表**
- 7天/30天的测试执行趋势
- 通过率趋势分析
- 每日测试执行数量统计

**3. 最近执行记录**
- 显示最近 5 条测试运行记录
- 包含测试类型、状态、执行时间等信息
- 可快速跳转到详细报告

**使用场景：**
- 快速了解项目测试状态
- 监控测试趋势和质量变化
- 定位最近的失败测试

---

## API 接口测试

API 接口测试模块提供类似 Postman 的接口测试体验，支持 HTTP/HTTPS 请求测试。

### 4.1 API 测试工作台

工作台是执行 API 测试的主要界面。

#### 操作步骤

**1. 进入工作台**
- 点击左侧菜单"API 测试" → "测试工作台"

**2. 创建请求**
- 点击顶部"新建请求"按钮
- 或点击左侧集合树中的"+"按钮创建集合和用例

**3. 配置请求**

a. **基本信息**
   - 请求方法：GET、POST、PUT、DELETE、PATCH
   - 请求 URL：输入完整的 API 地址
   - 请求名称：为请求命名（便于保存和管理）

b. **请求参数（Params）**
   - 点击"Params"标签页
   - 点击"添加参数"按钮
   - 输入参数名称（Key）和值（Value）
   - 参数会自动拼接到 URL 中

c. **请求头（Headers）**
   - 点击"Headers"标签页
   - 点击"添加请求头"按钮
   - 输入请求头名称和值
   - 常用请求头：Content-Type、Authorization 等

d. **请求体（Body）**
   - 点击"Body"标签页
   - 选择内容类型：JSON、表单等
   - 在编辑器中输入请求内容
   - 支持 JSON 格式高亮和语法检查

e. **断言脚本**
   - 点击"断言"标签页
   - 编写 JavaScript 断言代码
   - 可验证响应状态码、响应体内容等
   - 示例：
     ```javascript
     // 检查状态码
     assert(response.status === 200, "状态码应为 200")
     
     // 检查响应体
     assert(response.data.code === 0, "业务代码应为 0")
     
     // 检查字段存在
     assert(response.data.data !== undefined, "应返回数据")
     ```

**4. 发送请求**
- 配置完成后，点击"发送"按钮
- 等待响应结果

**5. 查看响应**

响应区域显示以下内容：
- **状态码**：HTTP 响应状态（200、404、500 等）
- **响应时间**：请求耗时（毫秒）
- **响应体**：
  - Pretty：格式化显示（支持 JSON 美化）
  - Raw：原始响应文本
  - Preview：HTML 预览（如果是网页）
- **响应头**：服务器返回的响应头信息
- **断言结果**：断言执行结果，显示通过或失败

**6. 保存用例**
- 点击"保存为用例"按钮
- 选择或创建集合
- 输入用例名称和描述
- 点击"确定"保存

**7. 导出 cURL**
- 点击更多操作（...）按钮
- 选择"复制为 cURL"
- cURL 命令已复制到剪贴板
- 可在终端直接执行

#### 环境变量使用

**使用方法：**
1. 在 URL、参数、请求头、请求体中使用 `{{变量名}}` 语法
2. 示例：
   - URL: `{{baseUrl}}/api/users`
   - Header: `Authorization: Bearer {{token}}`
   - Body: `{"userId": "{{userId}}"}`
3. 发送请求时会自动替换为当前环境的变量值

#### 快捷操作

- **Ctrl + Enter**：快速发送请求
- **Ctrl + S**：保存当前请求
- **Ctrl + K**：打开命令面板

### 4.2 用例管理

用例管理用于组织和维护 API 测试用例。

#### 查看用例列表

**操作步骤：**
1. 点击"API 测试" → "用例管理"
2. 页面显示所有用例列表

**列表信息：**
- 用例名称
- 请求方法（GET、POST 等）
- 请求 URL
- 所属集合
- 最后运行时间
- 运行状态（通过/失败/未运行）

#### 创建用例

**方式一：从工作台保存**
- 在工作台配置好请求后
- 点击"保存为用例"按钮
- 填写用例信息保存

**方式二：直接创建**
1. 点击"创建用例"按钮
2. 填写以下信息：
   - 用例名称（必填）
   - 请求方法（必填）
   - 请求 URL（必填）
   - 描述（可选）
   - 所属集合（可选）
3. 点击"确定"创建

#### 编辑用例

**操作步骤：**
1. 在用例列表中找到目标用例
2. 点击"编辑"按钮
3. 修改用例信息
4. 点击"保存"

**可编辑内容：**
- 用例名称和描述
- 请求方法和 URL
- 请求参数、请求头、请求体
- 断言脚本
- 所属集合

#### 执行用例

**单个执行：**
1. 点击用例行的"运行"按钮
2. 等待执行完成
3. 查看执行结果

**批量执行：**
1. 勾选多个用例
2. 点击"批量运行"按钮
3. 系统按顺序执行所有选中用例
4. 显示执行进度和汇总结果

#### 复制用例

**操作步骤：**
1. 点击用例的"复制"按钮
2. 系统自动创建副本（名称后加"副本"）
3. 可继续编辑副本

**使用场景：**
- 创建相似的测试用例
- 在不同环境测试同一接口
- 保留用例历史版本

#### 删除用例

**单个删除：**
1. 点击用例的"删除"按钮
2. 确认删除操作

**批量删除：**
1. 勾选要删除的用例
2. 点击"批量删除"按钮
3. 确认删除操作

**注意：** 删除操作不可恢复，请谨慎操作。

#### 搜索和筛选

**搜索用例：**
- 在搜索框输入关键词
- 支持按名称、URL 搜索
- 实时过滤结果

**筛选用例：**
- 按请求方法筛选（GET、POST 等）
- 按集合筛选
- 按状态筛选（通过/失败/未运行）

### 4.3 环境管理

环境管理用于维护不同测试环境的配置（开发、测试、生产等）。

#### 查看环境列表

**操作步骤：**
1. 点击"API 测试" → "环境管理"
2. 查看所有配置的环境

**显示信息：**
- 环境名称
- Base URL（基础地址）
- 描述
- 激活状态
- 变量数量
- 更新时间

#### 创建环境

**操作步骤：**
1. 点击"新建环境"按钮
2. 填写以下信息：
   - **环境名称**（必填）：如"开发环境"、"测试环境"
   - **Base URL**（必填）：如 `https://api-dev.example.com`
   - **描述**（可选）：环境用途说明
   - **变量配置**（可选）：
     - 点击"添加变量"
     - 输入变量名和值
     - 示例：`token = eyJhbGc...`
3. 点击"确定"创建

**示例配置：**
```
环境名称：开发环境
Base URL：http://localhost:5211
变量：
  - baseUrl: http://localhost:5211
  - token: dev_token_123
  - userId: 10001
```

#### 编辑环境

**操作步骤：**
1. 点击环境的"编辑"按钮
2. 修改环境配置
3. 点击"保存"

#### 切换环境

**操作步骤：**
1. 找到要激活的环境
2. 点击"激活"开关
3. 当前环境会应用到所有 API 测试

**说明：**
- 同时只能激活一个环境
- 激活新环境会自动停用其他环境
- 工作台的请求会使用当前激活环境的变量

#### 复制环境

**操作步骤：**
1. 点击环境的"复制"按钮
2. 系统创建环境副本
3. 修改副本配置

**使用场景：**
- 快速创建相似环境
- 保留环境配置历史

#### 删除环境

**操作步骤：**
1. 点击"删除"按钮
2. 确认删除操作

**注意：** 激活中的环境无法删除，需先切换到其他环境。

---

## Web 自动化测试

Web 自动化测试模块基于 Playwright，支持浏览器操作录制和回放。

### 5.1 测试脚本

测试脚本是 Web 自动化测试的核心，定义了浏览器操作步骤。

#### 查看脚本列表

**操作步骤：**
1. 点击"Web 测试" → "测试脚本"
2. 查看所有脚本

**列表信息：**
- 脚本名称
- 目标 URL
- 浏览器类型（Chromium、Firefox、WebKit）
- 步骤数量
- 执行状态（通过/失败/等待/运行中）
- 最后运行时间
- 执行耗时

#### 创建脚本

**方式一：手动创建**
1. 点击"新建脚本"按钮
2. 填写以下信息：
   - **脚本名称**（必填）
   - **目标 URL**（必填）：测试网站地址
   - **浏览器**（必填）：选择 chromium/firefox/webkit
   - **描述**（可选）：脚本用途说明
   - **脚本内容**（必填）：Playwright 代码
3. 点击"确定"创建

**方式二：从录制器保存**
- 在录制器中录制操作
- 点击"保存脚本"
- 填写脚本信息保存

**示例脚本：**
```javascript
// 访问网站
await page.goto('https://example.com');

// 填写表单
await page.fill('#username', 'admin');
await page.fill('#password', '123456');

// 点击按钮
await page.click('button[type="submit"]');

// 等待导航
await page.waitForNavigation();

// 断言
const title = await page.title();
assert(title === '首页', '应跳转到首页');
```

#### 编辑脚本

**操作步骤：**
1. 点击脚本的"编辑"按钮
2. 修改脚本内容
3. 点击"保存"

**可编辑内容：**
- 脚本名称和描述
- 目标 URL
- 浏览器类型
- 脚本代码
- 步骤配置

#### 执行脚本

**单个执行：**
1. 点击脚本的"运行"按钮
2. 系统启动浏览器执行脚本
3. 等待执行完成
4. 查看执行结果和日志

**批量执行：**
1. 勾选多个脚本
2. 点击"批量运行"按钮
3. 系统依次执行所有脚本
4. 显示执行进度

**执行结果：**
- **通过**：所有步骤和断言成功
- **失败**：某个步骤或断言失败
- 显示执行日志和截图（如果配置）
- 显示执行耗时

#### 查看脚本详情

**操作步骤：**
1. 点击脚本名称
2. 查看详细信息

**详情内容：**
- 脚本基本信息
- 步骤列表
- 执行历史
- 执行日志
- 失败截图（如果有）

#### 复制脚本

**操作步骤：**
1. 点击"复制"按钮
2. 系统创建脚本副本
3. 可修改副本

#### 删除脚本

**单个删除：**
- 点击"删除"按钮
- 确认删除

**批量删除：**
- 勾选多个脚本
- 点击"批量删除"
- 确认删除

#### 搜索和筛选

**搜索脚本：**
- 输入关键词搜索
- 支持按名称、URL 搜索

**筛选脚本：**
- 按浏览器类型筛选
- 按执行状态筛选
- 按创建时间排序

### 5.2 测试录制器

录制器支持直接从 Web 界面启动 Playwright 录制功能。

> ⚠️ **重要前提**：录制器功能需要后端服务在**本地运行**，远程服务器无法使用此功能。

#### 前置准备

在使用录制器之前，请确保已安装 Playwright：

```bash
# 进入后端目录
cd backend

# 激活虚拟环境
.venv\Scripts\activate

# 安装 Playwright
pip install playwright

# 安装浏览器驱动
playwright install
```

#### 使用录制器

**操作步骤：**

1. **打开录制器**
   - 点击"Web 测试" → "测试录制器"

2. **配置录制参数**
   - **目标 URL**：输入要测试的网站地址（必填）
     - 示例：`https://www.baidu.com`
   - **浏览器**：选择浏览器类型
     - Chromium（推荐）
     - Firefox
     - WebKit（Safari）

3. **开始录制**
   - 点击"开始录制"按钮
   - 系统会自动启动：
     - **Playwright Inspector 窗口**：显示生成的代码
     - **浏览器窗口**：用于实际操作

4. **进行录制**
   - 在打开的浏览器窗口中正常操作网站
   - 支持的操作：
     - ✅ 页面导航
     - ✅ 点击按钮、链接
     - ✅ 填写表单
     - ✅ 选择下拉框
     - ✅ 勾选复选框
     - ✅ 右键菜单
     - ✅ 拖拽操作
     - ✅ 文件上传
   - Playwright Inspector 会实时显示生成的代码

5. **复制代码**
   - 在 **Playwright Inspector 窗口**中：
     - 确保选择的语言是 **Python**
     - 点击"Copy"按钮或手动选择复制所有代码
   
   **生成的代码示例：**
   ```python
   from playwright.sync_api import Playwright, sync_playwright
   
   def run(playwright: Playwright) -> None:
       browser = playwright.chromium.launch(headless=False)
       context = browser.new_context()
       page = context.new_page()
       
       # 录制的操作
       page.goto("https://www.baidu.com/")
       page.click("#kw")
       page.fill("#kw", "playwright")
       page.click("#su")
       
       context.close()
       browser.close()
   
   with sync_playwright() as playwright:
       run(playwright)
   ```

6. **停止录制**
   - 关闭 Playwright Inspector 窗口
   - 或在 Web 界面点击"停止"按钮

7. **保存脚本**
   - 返回 EasyTest Web 界面
   - 点击"保存脚本"按钮
   - 填写脚本信息：
     - 脚本名称（必填）
     - 描述（可选）
     - 目标 URL（自动填充）
     - 浏览器类型（自动填充）
   - 在弹出的对话框中，粘贴复制的代码
   
   **注意：** 需要调整代码格式为 EasyTest 支持的格式：
   
   ```python
   """
   百度搜索测试
   """
   from playwright.sync_api import sync_playwright, expect
   
   def run():
       with sync_playwright() as p:
           # 启动浏览器（headless=True 用于后台运行）
           browser = p.chromium.launch(headless=True)
           page = browser.new_page()
           
           # 录制的操作（从 Inspector 复制）
           page.goto("https://www.baidu.com/")
           page.click("#kw")
           page.fill("#kw", "playwright")
           page.click("#su")
           
           # 等待结果加载
           page.wait_for_load_state("networkidle")
           
           # 添加断言
           expect(page).to_have_title("playwright_百度搜索")
           
           # 截图
           page.screenshot(path="result.png")
           
           # 关闭浏览器
           browser.close()
           
           return {"status": "success"}
   
   if __name__ == "__main__":
       result = run()
       print(result)
   ```

8. **运行测试**
   - 保存后，脚本会出现在"测试脚本"列表
   - 点击"运行"按钮执行测试

#### 注意事项

**环境要求：**
- ✅ 后端服务必须在**本地运行**
- ✅ 已安装 Playwright 和浏览器驱动
- ✅ 有足够的系统资源运行浏览器

**使用限制：**
- ❌ 远程服务器无法使用（用户看不到浏览器窗口）
- ❌ 同一用户同时只能有一个录制进程
- ❌ Docker 容器中可能无法使用

**常见问题：**

1. **点击"开始录制"后没有反应？**
   - 检查 Playwright 是否安装：`playwright --version`
   - 查看浏览器控制台错误信息
   - 确认后端服务在本地运行

2. **浏览器窗口没有打开？**
   - 检查系统是否有图形界面
   - 确认浏览器驱动已安装：`playwright install`
   - 查看后端日志错误信息

3. **如何优化录制的代码？**
   - 添加等待：`page.wait_for_load_state("networkidle")`
   - 添加断言：`expect(page).to_have_title("预期标题")`
   - 添加错误处理：使用 try-except
   - 设置 headless 模式：`headless=True`

#### 录制器工作原理

```
┌─────────────┐      启动请求      ┌─────────────┐
│  Web 界面   │ ───────────────▶  │  后端服务   │
│  (浏览器)   │                    │  (Flask)    │
└─────────────┘                    └─────────────┘
                                          │
                                          │ subprocess.Popen
                                          ▼
                                   ┌─────────────────┐
                                   │  playwright     │
                                   │  codegen 进程   │
                                   └─────────────────┘
                                          │
                        ┌─────────────────┴─────────────────┐
                        ▼                                   ▼
                 ┌─────────────┐                   ┌──────────────┐
                 │  Inspector  │                   │  浏览器窗口  │
                 │  (代码生成) │                   │  (用户操作)  │
                 └─────────────┘                   └──────────────┘
                        │
                        │ 用户复制代码
                        ▼
                 ┌─────────────┐
                 │  粘贴到      │
                 │  保存脚本    │
                 └─────────────┘
```

#### 替代方案（如果无法使用 Web 界面）

这是 Playwright 官方推荐的录制方式：

1. **安装 Playwright**（如果未安装）
   ```bash
   pip install playwright
   playwright install
   ```

2. **启动录制器**
   ```bash
   # 录制指定网站
   playwright codegen https://example.com
   
   # 指定浏览器
   playwright codegen --browser=chromium https://example.com
   playwright codegen --browser=firefox https://example.com
   playwright codegen --browser=webkit https://example.com
   
   # 录制移动端
   playwright codegen --device="iPhone 13" https://example.com
   ```

3. **录制操作**
   - 命令执行后会打开两个窗口：
     - 浏览器窗口：在这里进行操作
     - Inspector 窗口：显示生成的代码
   - 在浏览器中正常操作网站
   - Inspector 实时生成 Python/JavaScript 代码

4. **复制代码到 EasyTest**
   - 录制完成后，复制 Inspector 中的代码
   - 在 EasyTest 中创建新脚本
   - 粘贴代码并根据需要调整
   - 保存并运行测试

**方案二：手动编写脚本**

根据测试需求直接编写 Playwright 脚本：

1. 在"测试脚本"页面点击"新建脚本"
2. 参考以下模板编写代码：

```python
"""
手动编写的 Playwright 测试脚本
"""
from playwright.sync_api import sync_playwright, expect

def run():
    with sync_playwright() as p:
        # 启动浏览器
        browser = p.chromium.launch(headless=True)
        page = browser.new_page()
        
        # 访问登录页
        page.goto("https://example.com/login")
        
        # 填写表单
        page.fill("#username", "admin")
        page.fill("#password", "password123")
        
        # 点击登录按钮
        page.click('button:has-text("登录")')
        
        # 等待导航完成
        page.wait_for_load_state("networkidle")
        
        # 断言：检查是否登录成功
        expect(page.locator(".welcome-message")).to_be_visible()
        expect(page.locator(".user-name")).to_have_text("admin")
        
        # 截图保存
        page.screenshot(path="login_success.png")
        
        # 关闭浏览器
        browser.close()
        
        return {"status": "success", "message": "登录测试通过"}

if __name__ == "__main__":
    result = run()
    print(result)
```

**常用 Playwright 操作示例：**

```python
# 导航
page.goto("https://example.com")
page.go_back()
page.go_forward()
page.reload()

# 点击
page.click("button")
page.click("#submit-btn")
page.click("text=确定")

# 输入
page.fill("#username", "admin")
page.type("#search", "关键词", delay=100)  # 模拟打字
page.press("#input", "Enter")  # 按键

# 选择
page.select_option("#country", "China")
page.check("#agree")  # 勾选复选框
page.uncheck("#newsletter")  # 取消勾选

# 等待
page.wait_for_timeout(1000)  # 等待 1 秒
page.wait_for_selector(".result")  # 等待元素出现
page.wait_for_load_state("networkidle")  # 等待网络空闲

# 断言
expect(page).to_have_title("首页")
expect(page.locator(".error")).to_be_hidden()
expect(page.locator(".success")).to_contain_text("成功")

# 截图
page.screenshot(path="screenshot.png")
page.locator(".header").screenshot(path="header.png")

# 获取内容
text = page.inner_text(".title")
html = page.inner_html(".content")
value = page.input_value("#input")
```

**方案三：使用元素库辅助编写**

1. 先在"元素库"中管理页面元素：
   - 添加登录页的用户名输入框：`#username`
   - 添加登录页的密码输入框：`#password`
   - 添加登录按钮：`button[type="submit"]`

2. 编写脚本时直接引用：
   ```python
   # 使用元素库中定义的定位器
   page.fill("#username", "admin")  # 用户名输入框
   page.fill("#password", "123456")  # 密码输入框
   page.click("button[type='submit']")  # 登录按钮
   ```

#### 未来规划

录制器功能计划在未来版本中实现，可能的方案：

1. **桌面客户端**：开发独立的桌面应用，集成录制功能
2. **浏览器插件**：开发 Chrome/Firefox 插件实现录制
3. **代理模式**：通过本地代理程序连接 Web 界面和 Playwright

#### 当前录制器界面说明

虽然录制器页面存在，但仅作为 UI 演示：

**操作步骤：**
1. 点击"Web 测试" → "测试录制器"
2. 输入目标 URL
3. 选择浏览器类型
4. 点击"开始录制"会显示提示：**"录制功能需要配置 Playwright 录制服务，目前为演示模式"**
5. 可以手动添加模拟步骤并保存为脚本模板

**建议：**
- 使用上述替代方案进行真实录制
- 将录制的代码复制到 EasyTest 中运行
- 关注项目更新，等待录制功能正式发布

### 5.3 元素库

元素库用于统一管理页面元素定位器，提高脚本可维护性。

#### 功能说明

**用途：**
- 集中管理页面元素
- 复用元素定位器
- 当页面变化时，只需修改元素库
- 提高脚本可维护性

#### 查看元素列表

**操作步骤：**
1. 点击"Web 测试" → "元素库"
2. 查看所有元素

**列表信息：**
- 元素名称
- 页面/模块
- 定位方式（CSS、XPath、ID、Text）
- 定位器表达式
- 描述
- 更新时间

#### 创建元素

**操作步骤：**
1. 点击"添加元素"按钮
2. 填写以下信息：
   - **元素名称**（必填）：如"登录按钮"
   - **页面/模块**（必填）：如"登录页"
   - **定位方式**（必填）：
     - CSS Selector
     - XPath
     - ID
     - Text（文本内容）
     - Test ID（测试专用 ID）
   - **定位器**（必填）：定位表达式
   - **描述**（可选）：元素说明
3. 点击"确定"创建

**示例配置：**
```
元素名称：用户名输入框
页面：登录页
定位方式：CSS Selector
定位器：#username
描述：用户登录表单的用户名输入框
```

**常用定位器示例：**
- CSS: `#username`, `.btn-primary`, `input[name="email"]`
- XPath: `//button[@type="submit"]`, `//div[@class="header"]/a`
- ID: `login-btn`, `search-input`
- Text: `text=登录`, `text=提交`

#### 编辑元素

**操作步骤：**
1. 点击元素的"编辑"按钮
2. 修改元素信息
3. 点击"保存"

**常见场景：**
- 页面改版后更新定位器
- 优化定位策略
- 添加更详细的描述

#### 在脚本中使用元素

**方法一：手动引用**
```javascript
// 从元素库获取定位器
const usernameInput = '#username';  // 对应元素库中的定位器
await page.fill(usernameInput, 'admin');
```

**方法二：系统引用（开发中）**
```javascript
// 未来支持直接引用元素库
await elements.fill('登录页.用户名输入框', 'admin');
```

#### 导出元素

**操作步骤：**
1. 选择要导出的元素
2. 点击"导出"按钮
3. 下载 JSON/Excel 格式文件

**用途：**
- 备份元素配置
- 团队共享元素库
- 跨项目复用

#### 导入元素

**操作步骤：**
1. 点击"导入"按钮
2. 选择元素配置文件（JSON/Excel）
3. 确认导入

#### 删除元素

**操作步骤：**
1. 点击"删除"按钮
2. 确认删除

**注意：** 删除前确认没有脚本使用该元素。

#### 搜索元素

**操作步骤：**
- 在搜索框输入关键词
- 支持按名称、页面、定位器搜索
- 实时过滤结果

---

## 性能测试

性能测试模块基于 Locust，支持负载测试和压力测试。

### 6.1 测试场景

测试场景定义了性能测试的配置和任务。

#### 查看场景列表

**操作步骤：**
1. 点击"性能测试" → "测试场景"
2. 查看所有场景

**列表信息：**
- 场景名称
- 目标 URL
- 请求方法
- 并发用户数
- 孵化速率（每秒增加的用户数）
- 运行时长
- 执行状态（未运行/运行中/已完成）
- 最后运行时间

#### 创建场景

**操作步骤：**
1. 点击"新建场景"按钮
2. 填写以下信息：

   **基本信息：**
   - **场景名称**（必填）：如"登录接口压测"
   - **描述**（可选）：场景说明
   
   **测试目标：**
   - **目标 URL**（必填）：如 `https://api.example.com/login`
   - **请求方法**（必填）：GET、POST、PUT、DELETE
   
   **性能参数：**
   - **并发用户数**（必填）：同时运行的虚拟用户数
   - **孵化速率**（必填）：每秒启动的用户数
   - **运行时长**（可选）：测试持续时间（秒），为空则持续运行
   
   **请求配置：**
   - **请求头**（可选）：JSON 格式
   - **请求体**（可选）：JSON 格式
   - **超时时间**（可选）：请求超时时间（秒）

3. 点击"确定"创建

**示例配置：**
```
场景名称：首页并发测试
目标 URL：https://www.example.com
请求方法：GET
并发用户数：100
孵化速率：10
运行时长：300
描述：测试首页在100并发下的性能表现
```

#### 编辑场景

**操作步骤：**
1. 点击场景的"编辑"按钮
2. 修改场景配置
3. 点击"保存"

**注意：** 运行中的场景无法编辑，需先停止。

#### 运行场景

**操作步骤：**
1. 点击场景的"运行"按钮
2. 系统启动 Locust 测试
3. 场景状态变为"运行中"
4. 可跳转到实时监控页面查看

**运行过程：**
1. 系统按孵化速率逐步增加虚拟用户
2. 每个虚拟用户循环发送请求
3. 记录响应时间、成功率等指标
4. 达到运行时长后自动停止（如果设置）

#### 停止场景

**操作步骤：**
1. 点击"停止"按钮
2. 系统停止所有虚拟用户
3. 保存测试结果

#### 查看场景配置

**操作步骤：**
1. 点击场景名称
2. 查看详细配置

**显示内容：**
- 完整的场景配置
- 历史执行记录
- 性能趋势对比

#### 复制场景

**操作步骤：**
1. 点击"复制"按钮
2. 系统创建场景副本
3. 可修改副本配置

**使用场景：**
- 创建不同并发数的测试
- 保留测试历史版本

#### 删除场景

**单个删除：**
- 点击"删除"按钮
- 确认删除

**批量删除：**
- 勾选多个场景
- 点击"批量删除"
- 确认删除

**注意：** 运行中的场景无法删除。

#### 搜索和筛选

**搜索场景：**
- 输入关键词搜索
- 支持按名称、URL 搜索

**筛选场景：**
- 按状态筛选（未运行/运行中/已完成）
- 按创建时间排序

### 6.2 实时监控

实时监控显示运行中性能测试的实时数据。

#### 查看实时监控

**操作步骤：**
1. 点击"性能测试" → "实时监控"
2. 查看当前运行的所有场景
3. 点击场景卡片查看详细指标

**监控指标：**

**1. 概览数据**
- **当前用户数**：当前运行的虚拟用户数
- **总请求数**：累计发送的请求数量
- **失败请求数**：失败的请求数量
- **平均响应时间**：所有请求的平均响应时间（ms）
- **请求速率**：每秒请求数（RPS）

**2. 响应时间图表**
- 实时响应时间曲线
- 最小/平均/最大/P95/P99 响应时间
- 按时间轴显示趋势

**3. 用户数图表**
- 虚拟用户数增长曲线
- 显示孵化过程

**4. 请求统计**
- 成功率
- 失败率
- 错误类型分布

**5. 吞吐量图表**
- RPS（每秒请求数）趋势
- 吞吐量峰值

#### 刷新数据

- 页面自动刷新（每 5 秒）
- 可手动点击"刷新"按钮
- 实时更新图表

#### 停止测试

**操作步骤：**
1. 在监控页面点击"停止"按钮
2. 确认停止操作
3. 系统停止测试并保存结果

#### 导出监控数据

**操作步骤：**
1. 点击"导出"按钮
2. 选择导出格式（CSV、Excel）
3. 下载监控数据文件

### 6.3 测试结果

测试结果展示性能测试的详细分析报告。

#### 查看结果列表

**操作步骤：**
1. 点击"性能测试" → "测试结果"
2. 查看所有测试结果

**列表信息：**
- 场景名称
- 开始时间
- 结束时间
- 运行时长
- 总请求数
- 成功率
- 平均响应时间
- P95 响应时间
- 最大并发数

#### 查看详细结果

**操作步骤：**
1. 点击结果行或"查看"按钮
2. 进入详细结果页面

**详细报告包含：**

**1. 基本信息**
- 场景名称和描述
- 测试时间范围
- 运行时长
- 测试配置（并发数、孵化速率等）

**2. 性能指标汇总**
- 总请求数
- 成功请求数 / 失败请求数
- 成功率
- 平均响应时间
- P50/P75/P90/P95/P99 响应时间
- 最小/最大响应时间
- 平均 RPS
- 峰值 RPS

**3. 响应时间分布图**
- 柱状图显示响应时间分布
- 区间：0-100ms、100-200ms、200-500ms 等
- 了解响应时间集中区间

**4. 时间趋势图表**
- 响应时间趋势
- 吞吐量趋势
- 用户数增长曲线
- 错误率趋势

**5. 错误统计**
- 错误类型和数量
- 错误率
- 典型错误示例

**6. 性能评估**
- 系统根据测试结果给出性能评级
- 瓶颈分析
- 优化建议

#### 对比测试结果

**操作步骤：**
1. 勾选 2-3 个测试结果
2. 点击"对比"按钮
3. 查看对比报告

**对比内容：**
- 关键指标对比表
- 趋势对比图表
- 性能变化分析

**使用场景：**
- 优化前后对比
- 不同并发数对比
- 版本性能对比

#### 导出结果

**操作步骤：**
1. 点击"导出"按钮
2. 选择导出格式：
   - PDF 报告（包含图表）
   - Excel 数据（原始数据）
   - CSV 文件（请求明细）
3. 下载结果文件

#### 删除结果

**单个删除：**
- 点击"删除"按钮
- 确认删除

**批量删除：**
- 勾选多个结果
- 点击"批量删除"
- 确认删除

#### 搜索和筛选

**搜索结果：**
- 输入关键词搜索
- 支持按场景名称搜索

**筛选结果：**
- 按时间范围筛选
- 按成功率筛选
- 按响应时间排序

---

## 测试报告

测试报告模块汇总所有类型测试的执行记录和统计分析。

### 7.1 查看报告列表

**操作步骤：**
1. 点击左侧菜单"测试报告"
2. 查看所有测试运行记录

**列表信息：**
- 测试类型（API 测试/Web 测试/性能测试）
- 测试对象名称
- 执行状态（成功/失败/运行中/已取消）
- 总用例数
- 通过数 / 失败数 / 跳过数
- 通过率
- 执行时长
- 开始时间
- 结束时间
- 环境名称
- 触发方式（手动/定时）

### 7.2 筛选报告

**按测试类型筛选：**
- 点击类型下拉框
- 选择：全部/API 测试/Web 测试/性能测试
- 自动刷新列表

**按关键词搜索：**
- 在搜索框输入关键词
- 支持按测试名称搜索
- 实时过滤结果

**按时间范围筛选：**
- 点击日期选择器
- 选择开始和结束日期
- 查看指定时间段的报告

**按状态筛选：**
- 选择：全部/成功/失败/运行中
- 快速定位特定状态的测试

### 7.3 查看报告详情

**操作步骤：**
1. 点击报告行或"查看"按钮
2. 进入报告详情页面

**详情内容：**

**1. 测试概要**
- 测试类型和名称
- 执行时间和时长
- 执行结果（成功/失败）
- 用例统计

**2. API 测试报告**
- 请求列表
- 请求方法和 URL
- 响应状态码
- 响应时间
- 断言结果
- 请求/响应详情

**3. Web 测试报告**
- 执行步骤列表
- 每步执行状态
- 步骤截图（如果有）
- 错误信息和堆栈
- 浏览器日志

**4. 性能测试报告**
- 性能指标汇总
- 响应时间分布
- 时间趋势图表
- 错误统计
- （见"性能测试结果"部分）

**5. 日志和错误**
- 详细执行日志
- 错误堆栈跟踪
- 系统日志

### 7.4 下载报告

**单个下载：**
1. 点击报告的"下载"按钮
2. 选择下载格式：
   - PDF（图文报告）
   - HTML（网页格式）
   - JSON（原始数据）
3. 下载报告文件

**批量下载：**
1. 勾选多个报告
2. 点击"批量下载"按钮
3. 系统打包所有报告
4. 下载 ZIP 文件

### 7.5 删除报告

**单个删除：**
- 点击"删除"按钮
- 确认删除操作

**批量删除：**
- 勾选多个报告
- 点击"批量删除"按钮
- 确认删除操作

**注意：** 运行中的测试无法删除。

### 7.6 统计分析

报告页面顶部显示统计卡片和图表。

**统计卡片：**
- **总运行数**：所有测试运行次数
- **成功运行数**：执行成功的次数
- **失败运行数**：执行失败的次数
- **成功率**：成功率百分比

**每日趋势图表：**
- 显示最近 7 天/30 天的测试趋势
- 每日执行次数
- 每日成功率
- 测试类型分布

**使用场景：**
- 监控测试活动
- 发现质量趋势
- 分析测试效率

### 7.7 分享报告

**操作步骤：**
1. 点击"分享"按钮
2. 系统生成分享链接
3. 复制链接发送给团队成员

**分享选项：**
- 生成只读链接
- 设置访问密码
- 设置过期时间

---

## 测试文档

测试文档模块提供 Markdown 编辑器，用于管理测试相关文档。

### 8.1 文档管理

#### 查看文档列表

**操作步骤：**
1. 点击左侧菜单"测试文档"
2. 左侧树形结构显示所有文档

**显示信息：**
- 文档标题
- 分类（测试计划/测试用例/接口文档等）
- 更新时间
- 标签

#### 创建文档

**操作步骤：**
1. 点击"新建文档"按钮
2. 填写以下信息：
   - **文档标题**（必填）
   - **分类**（必填）：
     - 测试计划
     - 测试用例
     - 接口文档
     - 测试报告
     - 其他
   - **标签**（可选）：多个标签用逗号分隔
   - **内容**（可选）：Markdown 格式
3. 点击"创建"按钮

**默认模板：**
系统提供默认 Markdown 模板，包含：
- 标题结构
- 常用章节
- Markdown 语法示例

#### 编辑文档

**操作步骤：**
1. 点击左侧树中的文档
2. 文档在右侧显示
3. 点击"编辑"按钮进入编辑模式

**编辑器功能：**

**1. 双栏编辑**
- 左侧：Markdown 源码编辑器
- 右侧：实时预览
- 同步滚动

**2. 语法高亮**
- Markdown 语法高亮
- 代码块语法高亮
- 支持多种编程语言

**3. 快捷工具栏**
- 标题（H1-H6）
- 粗体、斜体
- 列表（有序、无序）
- 链接、图片
- 代码块
- 表格
- 引用

**4. 自动保存**
- 编辑时自动保存草稿
- 避免内容丢失

#### Markdown 语法示例

```markdown
# 一级标题

## 二级标题

### 三级标题

**粗体文本**
*斜体文本*
~~删除线~~

- 无序列表项 1
- 无序列表项 2

1. 有序列表项 1
2. 有序列表项 2

[链接文本](https://example.com)

![图片描述](image-url.png)

`行内代码`

\`\`\`python
# 代码块
def hello():
    print("Hello World")
\`\`\`

> 引用文本

| 列1 | 列2 | 列3 |
|-----|-----|-----|
| 数据1 | 数据2 | 数据3 |

---

水平分割线
```

#### 保存文档

**操作步骤：**
- 编辑完成后点击"保存"按钮
- 或使用快捷键 Ctrl+S
- 系统自动更新文档

#### 预览文档

**操作步骤：**
1. 选择文档
2. 右侧自动显示渲染后的内容
3. 支持 Markdown 所有语法

**预览功能：**
- 样式渲染
- 代码高亮
- 表格美化
- 链接可点击
- 图片显示

#### 删除文档

**操作步骤：**
1. 选择文档
2. 点击"删除"按钮
3. 确认删除操作

#### 搜索文档

**操作步骤：**
- 在搜索框输入关键词
- 实时过滤文档列表
- 支持按标题、标签、内容搜索

#### 导出文档

**操作步骤：**
1. 选择文档
2. 点击"导出"按钮
3. 选择导出格式：
   - Markdown（.md 文件）
   - HTML（网页格式）
   - PDF（带样式的文档）
4. 下载导出文件

**使用场景：**
- 分享文档给团队
- 归档测试文档
- 生成正式报告

### 8.2 文档分类

#### 分类说明

**1. 测试计划**
- 项目测试计划
- 测试策略
- 测试范围和目标
- 资源和时间安排

**2. 测试用例**
- 功能测试用例
- 接口测试用例
- 性能测试用例
- 用例详细步骤

**3. 接口文档**
- API 接口说明
- 请求/响应格式
- 参数说明
- 错误码定义

**4. 测试报告**
- 阶段性测试报告
- 缺陷统计分析
- 测试总结
- 质量评估

**5. 其他**
- 测试规范
- 环境配置
- 问题记录
- 知识库

#### 管理分类

**创建分类：**
1. 点击"管理分类"按钮
2. 输入新分类名称
3. 点击"添加"

**重命名分类：**
1. 找到要修改的分类
2. 点击"编辑"按钮
3. 输入新名称
4. 保存修改

**删除分类：**
1. 选择要删除的分类
2. 点击"删除"按钮
3. 确认操作

**注意：** 删除分类不会删除该分类下的文档，文档会移到"未分类"。

### 8.3 文档标签

#### 使用标签

**添加标签：**
- 创建或编辑文档时
- 在标签输入框输入标签
- 多个标签用逗号分隔
- 示例：`API,登录,V1.0`

**标签建议：**
- 模块名称（登录、支付、订单）
- 测试类型（功能、性能、安全）
- 版本号（V1.0、V2.0）
- 优先级（P0、P1、P2）
- 状态（待完善、已完成）

#### 按标签筛选

**操作步骤：**
1. 点击标签筛选器
2. 选择一个或多个标签
3. 列表只显示包含这些标签的文档

#### 管理标签

**查看所有标签：**
- 点击"标签管理"
- 显示所有已使用的标签
- 显示每个标签的文档数量

**重命名标签：**
1. 找到要修改的标签
2. 点击"重命名"
3. 输入新名称
4. 所有使用该标签的文档自动更新

**删除标签：**
1. 选择要删除的标签
2. 点击"删除"
3. 从所有文档中移除该标签

### 8.4 文档模板

#### 使用模板

**操作步骤：**
1. 点击"新建文档"
2. 选择"从模板创建"
3. 选择模板类型
4. 系统自动填充内容
5. 修改和补充内容

#### 内置模板

**1. 测试计划模板**
```markdown
# 测试计划

## 1. 测试概述
- 测试项目：
- 测试版本：
- 测试时间：
- 测试负责人：

## 2. 测试范围
- 测试功能模块：
- 测试类型：

## 3. 测试策略
...
```

**2. API 接口文档模板**
```markdown
# 接口文档

## 接口基本信息
- 接口名称：
- 接口地址：
- 请求方法：
- 接口描述：

## 请求参数
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|

## 响应示例
\`\`\`json
{
  "code": 0,
  "message": "success",
  "data": {}
}
\`\`\`
```

**3. 测试用例模板**
```markdown
# 测试用例

## 用例基本信息
- 用例编号：
- 用例标题：
- 优先级：
- 前置条件：

## 测试步骤
1. 步骤1
2. 步骤2

## 预期结果
...
```

#### 自定义模板

**创建模板：**
1. 编写好文档内容
2. 点击"另存为模板"
3. 输入模板名称
4. 保存为自定义模板

**管理模板：**
1. 点击"模板管理"
2. 查看所有模板
3. 可编辑、删除自定义模板

---

## 附录

### A. 常见问题

**Q1: 无法登录系统？**
- 检查用户名和密码是否正确
- 确认后端服务是否启动
- 清除浏览器缓存重试

**Q2: 接口测试返回 CORS 错误？**
- 检查后端 CORS 配置
- 确认请求地址是否正确
- 查看浏览器控制台详细错误

**Q3: 录制器无法使用？**
- 录制器目前为演示模式，尚未完全实现
- 请使用 Playwright CLI 本地录制：`playwright codegen https://example.com`
- 或手动编写 Playwright 脚本
- 参考"5.2 测试录制器"章节的替代方案

**Q5: 如何安装 Playwright？**
```bash
# 后端环境中安装
cd backend
pip install playwright

# 安装浏览器驱动
playwright install

# 验证安装
playwright --version
```

**Q6: 性能测试无法启动？**
- 检查 Locust 是否安装：`pip show locust`
- 确认目标地址是否可访问
- 检查并发数配置是否合理
- 查看后端日志

**Q7详细错误日志

**Q4: 性能测试无法启动？**
- 检查 Locust 是否安装
- 确认目标地址是否可访问
- 检查并发数配置是否合理

**Q5: 文档保存失败？**
- 检查网络连接
- 确认有足够的存储空间
- 刷新页面重试

### B. 快捷键

**全局快捷键：**
- `Ctrl + K`：打开命令面板
- `Ctrl + S`：保存当前内容
- `Ctrl + F`：搜索
- `Ctrl + /`：切换注释

**API 工作台：**
- `Ctrl + Enter`：发送请求
- `Ctrl + D`：复制请求
- `Ctrl + Delete`：删除请求

**文档编辑器：**
- `Ctrl + B`：加粗
- `Ctrl + I`：斜体
- `Ctrl + K`：插入链接
- `Ctrl + Shift + C`：插入代码块

### C. 系统限制

**请求限制：**
- 单个请求超时时间：30 秒
- 请求体最大大小：10 MB
- 并发请求数：50

**性能测试限制：**
- 最大虚拟用户数：1000
- 最长运行时间：24 小时
- 同时运行场景数：5

**文件上传限制：**
- 单个文件最大：50 MB
- 支持的图片格式：JPG、PNG、GIF
- 支持的文档格式：PDF、DOCX、XLSX

**数据存储：**
- 测试报告保留：90 天
- 文档版本保留：10 个
- 日志保留：30 天

### D. 技术支持

**文档资源：**
- 项目 GitHub：https://github.com/yourusername/easytest
- 在线文档：https://docs.easytest.com
- API 文档：https://api.easytest.com/docs

**反馈渠道：**
- GitHub Issues：提交 Bug 和功能建议
- 邮件支持：support@easytest.com
- 社区论坛：https://forum.easytest.com

**版本更新：**
- 查看 CHANGELOG.md 了解版本更新
- 定期检查系统更新
- 关注 GitHub Releases

---

## 版本信息

- 文档版本：v1.1.0
- 更新日期：2025-12-24
- 适用系统版本：EasyTest v1.1.0+

---

**祝您使用愉快！**

如有任何问题或建议，欢迎反馈给我们。
